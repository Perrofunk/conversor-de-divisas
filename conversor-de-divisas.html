<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width">
  <title>Conversor de Divisas</title>
</head>
<body style="background-color:black; color:white">
  <h1>Conversor de divisas</h1>
  <p>Actualmente, se soportan peso y dolar.</p>
  <form id="conversor">
    <h2>Conversor</h2>
    <div class="field">
      <label for="divisaconvertir">Divisa a convertir:</label>
      <input type="text" id="divisaconvertirid" name="divisaconvertir" placeholder="Divisa que queres convertir" value="">
    </div>
    <div class="field">
      <label for="divisafinal">Divisa deseada:</label>
      <input type="text" id="divisafinalid" name="divisafinal" placeholder="Divisa a la que queres convertir" value="">
    </div>
    <div class="field">
      <label for="cantidad">Especifica el monto:</label>
      <input type="text" id="cantidadid" name="cantidad" placeholder="Escribi acÃ¡ el monto a convertir" value="">
    </div>
    <div class="field">
      <button id="submit" type="button" onclick="funcionPadre()">Convertir</button>
    </div>
  </form>  
  <h1>Resultado:</h1>
    <div id="placeholder"><p id="resultado"></p></div>

    <script>
let content = '<p id="resultado"></p>';
function funcionPadre(){
  
  let div1 = document.getElementById('divisaconvertirid').value.toLowerCase();
  let div2 = document.getElementById('divisafinalid').value.toLowerCase();
  let can = document.getElementById('cantidadid').value;

  function funcionAnidada(div1, div2, can){
    
    
    if ((div1 !== "peso" && div1 !== "dolar")){
        return "Hubo un error, escribe tu divisa a convertir nuevamente";
    }
    if ((div2 !== "peso" && div2 !== "dolar")){
        return "Hubo un error, escribe la divisa a la que queres convertir nuevamente";
    }
    if (div1 === div2){
        return "Hubo multiples errores, debes escribir ambas divisas nuevamente, asegurate que esten bien escritas";
    }
    let final = 0;
    if (div1 === "dolar"){
      final = can * 117.80;
    } else{
      final = can / 117.80;
    }
    return parseFloat(final);
  }

  function divisa(divisa){
    function plural(divisa){
      if (can > 1 && divisa === "peso"){
        return "s";
        } else  if (can > 1 && divisa === "dolar"){
        return "es";
        }
    }
    return divisa + plural(divisa);
  }

  if ((typeof funcionAnidada(div1, div2, can) !=="number")){
    document.getElementById("placeholder").innerHTML = funcionAnidada(div1, div2, can);
  } else {
    document.getElementById("placeholder").innerHTML = content;
      if (div1 === "dolar"){
        document.getElementById("resultado").innerHTML = `Convertir ${can} ${divisa(div1)} a ${divisa(div2)} da como resultado: ${funcionAnidada(div1, div2, can)} ${divisa(div2)}`;
        } else {
          document.getElementById("resultado").innerHTML = `Convertir ${can} ${divisa(div1)} a ${divisa(div2)} da como resultado: ${funcionAnidada(div1, div2, can)} ${divisa(div2)}`;
        };
  }
}
    </script>
</body>
</html>